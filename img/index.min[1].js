!function(t){function e(o){if(a[o])return a[o].exports;var s=a[o]={exports:{},id:o,loaded:!1};return t[o].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){t.exports=a(1)},function(t,e,a){a(2),jQuery(function(t){var e=t("#MJJS_items"),a=t(".section-itmes",e),o=1;a.visibleWatcher({visibleClass:"mj-active",onVisible:function(t,e){a.filter(function(t){return e+o>=t}).addClass("preload")}}),t("#Js-tabs").mjTabs({style:{width:"100%"},autoPlay:3e3}),t(".sectionItems-loading").hide(),t(window).scroll(function(){s(t(this))});var s=function(e){t(".Js-listMove").each(function(){var a=parseInt(e.scrollTop()),o=parseInt(t(window).height()/3),s=parseInt(t(this).offset().top),i=parseInt((a-s+o)/10);a>=s-o&&s+o>=a&&(i=i?i+=1:i-=1,t(this).find("img.bg-pic").css({transform:"translate(0,"+i+"px)"}))})};s(t(window))}),a(5)},function(t,e,a){a(3),a(4),MI.productStock.checkStockType({orderStockUrl:"/api/hdstock.php?id=stockid&tag=battery2",objGoodsName:"小米移动电源2"})},function(t,e){!function(t){function e(e){function a(){for(var e=-1,a=t(document).scrollTop(),o=0,s=d.length;s>o&&a+n.viewport.height()>d[o];o+=1)e+=1;return e}function o(){var e=a();c!==e&&(c=e,r.filter(function(e){return c>=e&&!t(this).hasClass(n.visibleClass)}).addClass(n.visibleClass).trigger("visible.visibleWatcher"),n.onVisible(r.eq(c),c))}function s(){r.each(function(){var e=t(this).attr("data-offset")?Number(t(this).attr("data-offset")):n.offset,a=e%1===0?e:e*n.viewport.height();d.push(t(this).offset().top+a)}),o(),n.onLoad()}var i,n,r=t(this),c=-1,d=[];i={viewport:t(window),visibleClass:"is-visible",offset:300,onLoad:t.noop,onVisible:t.noop},n=t.extend({},i,e),s(),n.viewport.on({"scroll.visibleWatcher":o,"resize.visibleWatcher":s})}t.fn.visibleWatcher=function(t){return e.call(this,t),this}}(jQuery)},function(t,e){MI.namespace("productStock"),MI.productStock=function(){function t(t){t=$.extend({objcheckStockbtn:".J_productStockStatus",objListtempBox:$("#J_productConListContent"),objListTemp:$("#J_productColorTemplate"),objListlargePic:$(".J_curProductBg"),objListnamePrice:$(".J_curProductPrice"),objListnextBtn:".J_curNextbtn",orderStockUrl:"/misc/getstarstock/hdid/",objListcolorTotal:$("#J_curProductTotal"),objModal:$("#J_productVersion"),objGoodsName:"小米商品"},t||{});var e=function(){function e(t,e){$.ajax({type:"GET",url:MI.GLOBAL_CONFIG.damiaoSite+"hdinfo/cn",dataType:"jsonp",jsonp:"jsonpcallback",jsonpCallback:"hdinfo",timeour:1e4,error:function(){k(e)},success:function(a){a||k(e);var o=!1;$.each(a.status,function(a,s){return a?$.inArray(a,t)>=0?(o=!0,s.hdstart===!0&&s.hdstop===!1?(b=!1,i()):k(e),!1):void 0:!0}),o||k(e)}})}function a(){var t=$(".J_openRegister"),e=$("#J_modalOpenSaleRegister"),a=MI.GLOBAL_CONFIG.orderSite+"/site/login?redirectUrl="+location.href;t.on("click",function(o){o.preventDefault(),$.ajax({type:"GET",url:MI.GLOBAL_CONFIG.orderSite+"/misc/onsaleRegister?_r=",dataType:"jsonp",jsonp:"jsonpcallback",data:{goods_id:j},success:function(o){1===o.code?(t.replaceWith('<a class="btn btn-small btn-primary" data-disabled="false">已设置开售提醒</a>'),e.modal({backdrop:!0,keyboard:!0,show:!0})):-2===o.code&&(window.location.href=a)}})})}function o(t){$.ajax({type:"GET",url:MI.GLOBAL_CONFIG.orderSite+"/misc/onsaleCheck?_r=",dataType:"jsonp",jsonp:"jsonpcallback",data:{goods_list:j},success:function(e){var o="";1===e.code&&""!==e.data[j]?(o="已设置开售提醒",$(t).removeClass("J_openRegister")):(o="设置开售提醒",$(t).addClass("J_openRegister"),a()),$(t).removeClass("btn-disabled").removeClass("J_productStockStatus btn-gray").addClass("btn-primary").text(o).attr("data-disabled","false")}})}function s(e){$(e).attr("data-gid",p),$(t.objListnextBtn).on("click",function(){return $(e).hasClass("btn-disabled")?!1:void t.objModal.modal("hide")}),MI.bigtapAddCart({obj:e,overCallback:function(){k(e)},callback:function(t,e){t||location.reload(),1===t.code?location.href=MI.GLOBAL_CONFIG.staticSite+"/buySuccess/?gid="+e.attr("data-gid"):alert(t.msg)}})}function i(){b===!1?(v(t.objcheckStockbtn),u>1?r():s(t.objcheckStockbtn)):k(t.objcheckStockbtn)}function n(){var e=c+d,a=l?"<b>(包邮)</b>":"";t.objListcolorTotal.html("小计："+e+"元"+a)}function r(){var e=t.objListtempBox.find("li"),a=t.objListlargePic;e.on("click",function(){var e=$(this).attr("data-bg")+"?width=220&height=220",o=$(this).attr("data-gid"),i=$(this).attr("data-name");$(this).hasClass("saled")?$(t.objListnextBtn).addClass("btn-disabled").text("暂时缺货").attr("data-gid",""):$(t.objListnextBtn).removeClass("btn-disabled").text("立即购买"),c=parseInt($(this).attr("data-price")),$(this).addClass("current").siblings("li").removeClass("current"),a.css({background:"url("+e+") no-repeat center"}),t.objListnamePrice.text(i+" "+c+"元"),p=o,n(),s(t.objListnextBtn)}),$(t.objcheckStockbtn).on("click",function(){if(b)return!1;e.eq(0).click();var a=t.objModal.attr("data-width");t.objModal.css({width:a}).modal({backdrop:!0,keyboard:!0,show:!0})})}var c=0,d=0,l=!1,u=0,p="",b="",f=[],h=!1,m=!1,j="";$.ajax({url:MI.GLOBAL_CONFIG.orderSite+t.orderStockUrl,dataType:"jsonp",jsonp:"jsonpcallback",success:function(a){var o=[],s=doT.template(t.objListTemp.html());if("[object Array]"===Object.prototype.toString.call(a))o=a;else for(var n in a)a.hasOwnProperty(n)&&o.push(a[n]);t.objListtempBox.html(s(o)),$(".J_goodsTitle").text("购买"+t.objGoodsName),$.each(a,function(t,e){e.is_sale===!0&&(u++,$.inArray(e.id,MI.GLOBAL_CONFIG.damiaoGoodsId)>=0?(f.push(e.id),p=f.join("-"),h=!0):(e.is_cos===!1&&(b=!1,p=e.id),e.open_register===!0&&(m=!0,j=e.id)))}),h?e(f,t.objcheckStockbtn):i()}});var v=function(t){var e=$(t).attr("data-buy-text")||"立即购买";$(t).removeClass("btn-disabled").removeClass("btn-gray").addClass("btn-primary").text(e).attr("data-disabled","false")},k=function(t){var e="";m===!0?o(t):(e=$(t).attr("data-disable-text")||"暂时缺货",$(t).removeClass("btn-primary").addClass("btn-gray").addClass("btn-disabled").text(e).attr("data-disabled","true"))}};e()}return{checkStockType:t}}()},function(t,e){!function(t){"use strict";t.fn.mjTabs=function(e){function a(t){return clearInterval(r),r=setInterval(function(){n=n===t?0:n+1,o(n)},s.autoPlay),!1}function o(t){return i.find(s.mjItems).is(":animated")?!1:(i.find(s.mjItems).css("z-index",0).removeClass("mj-tabs-active").eq(t).show().addClass("mj-tabs-active").css("z-index",10).animate({opacity:1},s.mjSpeed,function(){i.find(s.mjItems).eq(t).siblings().hide().css({opacity:0})}),void i.find(".pager").removeClass("cur").eq(t).addClass("cur"))}var s=t.extend({mjItems:".mj-tabs-items",mjPosition:".mj-tabs-position",mjUpdown:".mj-tabs-updown",mjSpeed:500,effect:"opacity",autoPlay:!0,style:{}},e),i=this,n=0,r=null,c=i.find(s.mjItems).length-1;switch(i.each(function(){var e=t(this);e.css(s.style),t(this).find(s.mjItems).each(function(t){e.find(s.mjPosition).append('<a href="javascript:;" class="pager"><span>'+t+"</span></a>"),e.find(".pager").eq(0).addClass("cur")})}),i.find(".pager").click(function(){return t(this).hasClass("cur")?!1:(clearInterval(r),n=t(this).index(),void o(n))}),i.find(s.mjUpdown).click(function(){if(i.find(s.mjItems).is(":animated"))return!1;clearInterval(r);var e=t(this).attr("data-attr");n="prev"===e?0===n?c:n-1:n===c?0:n+1,o(n)}),s.autoPlay&&(a(c),i.mouseleave(function(){a(c)})),s.effect){case"opacity":i.find(s.mjItems).hide().css({position:"absolute",opacity:0}).eq(0).show().css({opacity:1,zIndex:10})}}}(jQuery)}]);