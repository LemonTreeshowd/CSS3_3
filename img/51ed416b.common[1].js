/*! www-miliao-com - v1.0.0 - 2016-03-07 */function Swipe(container,options){"use strict";function setup(){slides=element.children,length=slides.length,slides.length<2&&(options.continuous=!1),browser.transitions&&options.continuous&&slides.length<3&&(element.appendChild(slides[0].cloneNode(!0)),element.appendChild(element.children[1].cloneNode(!0)),slides=element.children),slidePos=new Array(slides.length),width=container.getBoundingClientRect().width||container.offsetWidth,element.style.width=slides.length*width+"px";for(var pos=slides.length;pos--;){var slide=slides[pos];slide.style.width=width+"px",slide.setAttribute("data-index",pos),browser.transitions&&(slide.style.left=pos*-width+"px",move(pos,index>pos?-width:pos>index?width:0,0))}options.continuous&&browser.transitions&&(move(circle(index-1),-width,0),move(circle(index+1),width,0)),browser.transitions||(element.style.left=index*-width+"px"),container.style.visibility="visible"}function prev(){options.continuous?slide(index-1):index&&slide(index-1)}function next(){options.continuous?slide(index+1):index<slides.length-1&&slide(index+1)}function circle(index){return(slides.length+index%slides.length)%slides.length}function slide(to,slideSpeed){if(index!=to){if(browser.transitions){var direction=Math.abs(index-to)/(index-to);if(options.continuous){var natural_direction=direction;direction=-slidePos[circle(to)]/width,direction!==natural_direction&&(to=-direction*slides.length+to)}for(var diff=Math.abs(index-to)-1;diff--;)move(circle((to>index?to:index)-diff-1),width*direction,0);to=circle(to),move(index,width*direction,slideSpeed||speed),move(to,0,slideSpeed||speed),options.continuous&&move(circle(to-direction),-(width*direction),0)}else to=circle(to),animate(index*-width,to*-width,slideSpeed||speed);index=to,offloadFn(options.callback&&options.callback(index,slides[index]))}}function move(index,dist,speed){translate(index,dist,speed),slidePos[index]=dist}function translate(index,dist,speed){var slide=slides[index],style=slide&&slide.style;style&&(style.webkitTransitionDuration=style.MozTransitionDuration=style.msTransitionDuration=style.OTransitionDuration=style.transitionDuration=speed+"ms",style.webkitTransform="translate("+dist+"px,0)translateZ(0)",style.msTransform=style.MozTransform=style.OTransform="translateX("+dist+"px)")}function animate(from,to,speed){if(!speed)return void(element.style.left=to+"px");var start=+new Date,timer=setInterval(function(){var timeElap=+new Date-start;return timeElap>speed?(element.style.left=to+"px",delay&&begin(),options.transitionEnd&&options.transitionEnd.call(event,index,slides[index]),void clearInterval(timer)):void(element.style.left=(to-from)*(Math.floor(timeElap/speed*100)/100)+from+"px")},4)}function begin(){interval=setTimeout(next,delay)}function stop(){delay=options.auto>0?options.auto:0,clearTimeout(interval)}var noop=function(){},offloadFn=function(fn){setTimeout(fn||noop,0)},browser={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(temp){var props=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var i in props)if(void 0!==temp.style[props[i]])return!0;return!1}(document.createElement("swipe"))};if(container){var slides,slidePos,width,length,element=container.children[0];options=options||{};var index=parseInt(options.startSlide,10)||0,speed=options.speed||300;options.continuous=void 0!==options.continuous?options.continuous:!0;var interval,isScrolling,delay=options.auto||0,start={},delta={},events={handleEvent:function(event){switch(event.type){case"touchstart":this.start(event);break;case"touchmove":this.move(event);break;case"touchend":offloadFn(this.end(event));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":offloadFn(this.transitionEnd(event));break;case"resize":offloadFn(setup)}options.stopPropagation&&event.stopPropagation()},start:function(event){var touches=event.touches[0];start={x:touches.pageX,y:touches.pageY,time:+new Date},isScrolling=void 0,delta={},element.addEventListener("touchmove",this,!1),element.addEventListener("touchend",this,!1)},move:function(event){if(!(event.touches.length>1||event.scale&&1!==event.scale)){options.disableScroll&&event.preventDefault();var touches=event.touches[0];delta={x:touches.pageX-start.x,y:touches.pageY-start.y},"undefined"==typeof isScrolling&&(isScrolling=!!(isScrolling||Math.abs(delta.x)<Math.abs(delta.y))),isScrolling||(event.preventDefault(),stop(),options.continuous?(translate(circle(index-1),delta.x+slidePos[circle(index-1)],0),translate(index,delta.x+slidePos[index],0),translate(circle(index+1),delta.x+slidePos[circle(index+1)],0)):(delta.x=delta.x/(!index&&delta.x>0||index==slides.length-1&&delta.x<0?Math.abs(delta.x)/width+1:1),translate(index-1,delta.x+slidePos[index-1],0),translate(index,delta.x+slidePos[index],0),translate(index+1,delta.x+slidePos[index+1],0)))}},end:function(event){var duration=+new Date-start.time,isValidSlide=Number(duration)<250&&Math.abs(delta.x)>20||Math.abs(delta.x)>width/2,isPastBounds=!index&&delta.x>0||index==slides.length-1&&delta.x<0;options.continuous&&(isPastBounds=!1);var direction=delta.x<0;isScrolling||(isValidSlide&&!isPastBounds?(direction?(options.continuous?(move(circle(index-1),-width,0),move(circle(index+2),width,0)):move(index-1,-width,0),move(index,slidePos[index]-width,speed),move(circle(index+1),slidePos[circle(index+1)]-width,speed),index=circle(index+1)):(options.continuous?(move(circle(index+1),width,0),move(circle(index-2),-width,0)):move(index+1,width,0),move(index,slidePos[index]+width,speed),move(circle(index-1),slidePos[circle(index-1)]+width,speed),index=circle(index-1)),options.callback&&options.callback(index,slides[index])):options.continuous?(move(circle(index-1),-width,speed),move(index,0,speed),move(circle(index+1),width,speed)):(move(index-1,-width,speed),move(index,0,speed),move(index+1,width,speed))),element.removeEventListener("touchmove",events,!1),element.removeEventListener("touchend",events,!1)},transitionEnd:function(event){parseInt(event.target.getAttribute("data-index"),10)==index&&(delay&&begin(),options.transitionEnd&&options.transitionEnd.call(event,index,slides[index]))}};return setup(),delay&&begin(),browser.addEventListener?(browser.touch&&element.addEventListener("touchstart",events,!1),browser.transitions&&(element.addEventListener("webkitTransitionEnd",events,!1),element.addEventListener("msTransitionEnd",events,!1),element.addEventListener("oTransitionEnd",events,!1),element.addEventListener("otransitionend",events,!1),element.addEventListener("transitionend",events,!1)),window.addEventListener("resize",events,!1)):window.onresize=function(){setup()},{setup:function(){setup()},slide:function(to,speed){stop(),slide(to,speed)},prev:function(){stop(),prev()},next:function(){stop(),next()},stop:function(){stop()},getPos:function(){return index},getNumSlides:function(){return length},kill:function(){stop(),element.style.width="",element.style.left="";for(var pos=slides.length;pos--;){var slide=slides[pos];slide.style.width="",slide.style.left="",browser.transitions&&translate(pos,0,0)}browser.addEventListener?(element.removeEventListener("touchstart",events,!1),element.removeEventListener("webkitTransitionEnd",events,!1),element.removeEventListener("msTransitionEnd",events,!1),element.removeEventListener("oTransitionEnd",events,!1),element.removeEventListener("otransitionend",events,!1),element.removeEventListener("transitionend",events,!1),window.removeEventListener("resize",events,!1)):window.onresize=null}}}}!function(a){"use strict";var b=a.util={},c=Array.prototype,d=Object.prototype,e=(Function.prototype,c.slice,d.toString),f=d.hasOwnProperty,g=Array.isArray;Array.keys,b.isString=function(a){return"[object String]"==e.call(a)},b.isArray=g||function(a){return"[object Array]"==e.call(a)},b.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},b.isDate=function(a){return"[object Date]"==e.call(a)},b.getQueryVal=function(a,b){var c,d=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i");return c=b&&-1!=b.indexOf("?")?b.split("?")[1].match(d):window.location.search.substr(1).match(d),null!=c?decodeURIComponent(c[2]):""},b.trim=function(a){return b.isString(a)?a.replace(/^\s+|\s+$/g,""):""},b.extend=function(a){if(!b.isObject(a))return a;for(var c,d,e=0,g=arguments.length;g>e;e++){c=arguments[e];for(d in c)f.call(c,d)&&(a[d]=c[d])}return a},b.sendStatistic=function(a,b){var c="https://data.game.xiaomi.com/1px.gif?ac=xm_client&client=sales_pic";if(a){var d,e="";for(d in a)f.call(a,d)&&(e+="&"+d+"="+a[d]);c+=e+"&_"+(new Date).getTime();var g=new Image;g.error=g.onload=function(){b&&b()},g.src=c}},b.isWXPlatform=function(){return/MicroMessenger/i.test(navigator.userAgent)},b.ajaxReq=function(a,b,c,d,e){var f={type:b||"get",url:a,data:c,dataType:"json",cache:!1,timeout:5e3,success:function(a,b,c){return a?"200"!=a.code?void(e&&e(a)):void(d&&d(a)):void(e&&e(null))},error:function(a,b,c){e&&e(c)}};$.ajax(f)},b.checkOperaSys=function(){return/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?"ios":/(Android)/i.test(navigator.userAgent)?"android":"pc"},b.mask=function(a,c,d){var e=$(window).height(),f=$(document).height(),g=$(document.body).height(),h=$('<div id="bg_mask"></div>'),i={position:"absolute",left:0,top:0,height:Math.max(e,g,f),bottom:0,width:"100%",background:"rgba(0, 0, 0, .7)","z-index":9999};if(a&&(b.isObject(a)?b.extend(i,a):b.isString(a)&&h.addClass(a)),h.css(i),$(document.body).css({position:"relative"}).append(h),c&&b.isArray(c))for(var j=0,k=c.length;k>j;j++){var l="";if(b.isArray(c[j].content))for(var m=0,n=c[j].content.length;n>m;m++)l+=c[j].content[m];else l=c[j].content;$(c[j].parentNodeSelector).append($(c[j].tag).addClass(c[j].className).html(l))}h.on("touchmove",function(a){a.preventDefault(),a.stopPropagation()}),b.registerEvent(d)},b.registerEvent=function(a){if(a&&b.isArray(a))for(var c=0,d=a.length;d>c;c++)"swipe"===a[c].eventType?$(a[c].selector).swipe({tap:a[c].listener}):"touch"===a[c].eventType?$(a[c].selector).touch({tap:a[c].listener}):$(a[c].selector).on(a[c].eventType,a[c].listener)},b.isMiTalk=function(){var a=window.MLJsHandler,b=""!=getCookie("userId")?!0:!1,c=""!=getCookie("nick")?!0:!1,d=""!=getCookie("avatar")?!0:!1,e=""!=getCookie("passToken")?!0:!1,f=""!=getCookie("serviceToken")?!0:!1,g=""!=getCookie("miVersion")?!0:!1;return a&&a.jsCallBack||b||g||f||e||c||d},b.random=function(a,b){return Math.floor(a+Math.random()*(b-a))},b.getCookie=function(a){var b=0,c=0;return document.cookie.length>0&&(b=document.cookie.indexOf(a+"="),-1!=b)?(b=b+a.length+1,c=document.cookie.indexOf(";",b),-1==c&&(c=document.cookie.length),document.cookie.substring(b,c)):""}}(window.mi||(window.mi={})),(window.jQuery||window.Zepto)&&!function($){$.fn.Swipe=function(params){return this.each(function(){$(this).data("Swipe",new Swipe($(this)[0],params))})}}(window.jQuery||window.Zepto);